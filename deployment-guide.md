# n8n安防企业AI产品监控工作流部署指南

## 概述

本指南将帮助您部署和配置一个自动化的n8n工作流，用于监控全球安防企业的AI产品发布动态。

## 系统要求

### 必需组件
- **n8n实例**: 建议使用n8n Cloud或自托管版本
- **Serper API密钥**: 用于Google搜索功能
- **SMTP配置**: 用于邮件通知（可选）
- **文件存储**: 用于保存JSON输出文件

### 推荐配置
- n8n版本: 1.0+
- 内存: 2GB+
- 存储: 10GB+
- 网络: 稳定互联网连接

## 部署步骤

### 1. 准备工作

#### 获取Serper API密钥
1. 访问 [Serper.dev](https://serper.dev)
2. 注册账户并获取API密钥
3. 在n8n中配置凭证:
   - 名称: `serperApiKey`
   - 值: 您的API密钥

#### 配置邮件服务（可选）
1. 准备SMTP服务器信息
2. 在n8n中配置邮件凭证
3. 更新工作流中的收件人地址

### 2. 导入工作流

#### 方法1: 使用JSON文件
1. 下载 `n8n-workflow-security-ai.json`
2. 在n8n界面中:
   - 点击 "Workflows" → "Import"
   - 选择JSON文件
   - 点击 "Import"

#### 方法2: 手动创建
1. 创建新工作流
2. 按照JSON文件中的节点配置逐步添加
3. 配置每个节点的参数

### 3. 配置参数

#### 修改搜索企业列表
在 "设置参数" 节点中更新:
```
Hikvision,Dahua Technology,Axis Communications,Bosch Security Systems,Honeywell Security
```

#### 调整搜索模式
```
AI product release,artificial intelligence announcement,AI security camera launch
```

#### 设置执行时间
在 "定时触发器" 节点中:
- 默认: 每日09:00
- 可根据需要调整

### 4. 测试工作流

#### 手动执行测试
1. 点击 "Execute Workflow"
2. 检查每个节点的输出
3. 验证JSON文件生成
4. 确认邮件通知

#### 验证输出格式
检查生成的JSON文件是否符合预期格式:
- 包含所有必要字段
- 数据格式正确
- 无错误信息

### 5. 生产部署

#### 激活工作流
1. 点击工作流顶部的 "Inactive" 切换为 "Active"
2. 确认定时任务已启用
3. 监控首次执行结果

#### 监控和维护
- 定期检查执行日志
- 监控API调用配额
- 更新企业列表和搜索关键词
- 备份工作流配置

## 故障排除

### 常见问题

#### 1. API调用失败
- **症状**: 搜索节点返回错误
- **解决**: 
  - 检查API密钥有效性
  - 确认配额是否用完
  - 验证网络连接

#### 2. 数据提取失败
- **症状**: 输出为空或不完整
- **解决**:
  - 检查搜索关键词
  - 验证解析逻辑
  - 增加等待时间

#### 3. 文件保存错误
- **症状**: JSON文件未生成
- **解决**:
  - 检查文件路径权限
  - 确认磁盘空间
  - 验证文件名格式

#### 4. 邮件发送失败
- **症状**: 未收到通知邮件
- **解决**:
  - 检查SMTP配置
  - 验证收件人地址
  - 查看邮件队列

### 性能优化

#### 提高搜索效率
- 使用批处理减少API调用
- 优化搜索关键词
- 调整执行频率

#### 减少资源消耗
- 限制搜索结果数量
- 优化数据处理逻辑
- 使用缓存机制

## 扩展功能

### 自定义企业列表
根据需要添加或删除监控企业:
```javascript
// 在"设置参数"节点中修改
const companies = [
  "Hikvision",
  "Dahua Technology",
  "Axis Communications",
  // 添加更多企业...
];
```

### 添加新搜索模式
扩展搜索关键词以提高覆盖率:
```javascript
const searchPatterns = [
  "AI product release",
  "machine learning security",
  "computer vision surveillance",
  // 添加更多模式...
];
```

### 集成其他数据源
可以扩展工作流以包含:
- 社交媒体监控
- 企业RSS订阅
- 行业新闻网站
- 专利数据库

## 安全考虑

### API密钥保护
- 使用n8n凭证管理
- 避免在代码中硬编码
- 定期轮换密钥

### 数据隐私
- 遵守数据保护法规
- 加密敏感信息
- 限制数据访问权限

### 网络安全
- 使用HTTPS连接
- 验证SSL证书
- 配置防火墙规则

## 监控和报告

### 关键指标
- 每日搜索结果数量
- 成功提取率
- API调用频率
- 错误率统计

### 报告生成
- 每日摘要邮件
- 周度趋势分析
- 月度统计报告
- 年度总结报告

## 支持和维护

### 定期维护任务
- 更新企业列表
- 优化搜索关键词
- 检查API配额
- 备份工作流配置

### 版本控制
- 使用Git管理工作流版本
- 记录变更历史
- 测试新版本
- 回滚机制

## 联系支持

如有问题或建议，请通过以下方式联系:
- 工作流文档: 查看README.md
- 技术支持: support@example.com
- 社区论坛: community.n8n.io

## 更新日志

### v1.0.0 (2025-01-08)
- 初始版本发布
- 支持15家安防企业监控
- 自动化搜索和数据提取
- JSON格式输出
- 邮件通知功能

---

*本指南将随着工作流的更新而持续改进。建议定期查看最新版本。*